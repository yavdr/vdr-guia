<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>GUIA</title>
        <meta http-equiv="content-type"
              content="text/html;charset=utf-8" />

        <!-- Include stylesheets -->
        <link href="/css/bootstrap.css" type="text/css" rel="stylesheet" />
        <link href="/css/lionbars.css" type="text/css" rel="stylesheet" />
        <link href="/css/jquery.fancybox.css" type="text/css" rel="stylesheet" />
        <link href="/css/guia.css" type="text/css" rel="stylesheet" />
        <style type="text/css">
            /* Override some defaults */
            html, body {
                background-color: #eee;
            }
            body {
                padding-top: 40px; /* 40px to make the container go all the way to the bottom of the topbar */
            }
            .container > footer p {
                text-align: center; /* center align it with the container */
            }
            .container {
                width: 820px; /* downsize our container to make the content feel a bit tighter and more cohesive. NOTE: this removes two full columns from the grid, meaning you only go to 14 columns and not 16. */
            }

            /* The white background content wrapper */
            .content {
                background-color: #fff;
                padding: 20px;
                margin: 0 -20px; /* negative indent the amount of the padding to maintain the grid system */
                -webkit-border-radius: 0 0 6px 6px;
                -moz-border-radius: 0 0 6px 6px;
                border-radius: 0 0 6px 6px;
                -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                -moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                box-shadow: 0 1px 2px rgba(0,0,0,.15);
            }

            /* Page header tweaks */
            .page-header {
                background-color: #f5f5f5;
                padding: 20px 20px 10px;
                margin: -20px -20px 20px;
            }


            /* Give a quick and non-cross-browser friendly divider */
            .content .span4 {
                margin-left: 0;
                padding-left: 19px;
                border-left: 1px solid #eee;
            }

            .topbar .btn {
                border: 0;
            }

            .span-one-third {
                width: 260px;
            }

        </style>
        
        <script type="text/javascript" src="http://api.flattr.com/js/0.6/load.js?mode=auto"></script>

        <% if (env == 'developement') { %>
        <!-- Include jquery, backbone and underscore -->
        <script type="text/javascript" src="/js/jquery/jquery-1.7.js"></script>
        <script type="text/javascript" src="/js/backbone/underscore.js"></script>
        <script type="text/javascript" src="/js/backbone/backbone.js"></script>

        <!-- Include utitlities -->
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="/js/utils/sha512.js"></script>
        <script type="text/javascript" src="/js/utils/xdate.js"></script>
        <script type="text/javascript" src="/js/bootstrap.js"></script>
        <script type="text/javascript" src="/js/async.js"></script>

        <!-- Include views -->
        <script type="text/javascript" src="/js/views/ContactView.js"></script>
        <script type="text/javascript" src="/js/views/EventView.js"></script>
        <script type="text/javascript" src="/js/views/TVGuideView.js"></script>
        <script type="text/javascript" src="/js/views/LogoutView.js"></script>
        <script type="text/javascript" src="/js/views/NavigationView.js"></script>
        <script type="text/javascript" src="/js/views/ProgramView.js"></script>
        <script type="text/javascript" src="/js/views/RecordingsView.js"></script>
        <script type="text/javascript" src="/js/views/SearchView.js"></script>
        <script type="text/javascript" src="/js/views/SearchresultsView.js"></script>
        <script type="text/javascript" src="/js/views/SettingsView.js"></script>
        <script type="text/javascript" src="/js/views/TimerView.js"></script>
        <script type="text/javascript" src="/js/views/WelcomeView.js"></script>

        <!-- subviews -->
        <script type="text/javascript" src="/js/views/Settings/ChannelsView.js"></script>
        <script type="text/javascript" src="/js/views/Settings/DatabaseView.js"></script>
        <script type="text/javascript" src="/js/views/Settings/GuiaView.js"></script>
        <script type="text/javascript" src="/js/views/Program/EventView.js"></script>
        <script type="text/javascript" src="/js/views/TVGuide/EventView.js"></script>
        <script type="text/javascript" src="/js/views/TVGuide/ChannelView.js"></script>
        <script type="text/javascript" src="/js/views/TVGuide/PaginationView.js"></script>
        <script type="text/javascript" src="/js/views/Channel/Select/DialogView.js"></script>

        <!-- Include models -->
        <script type="text/javascript" src="/js/models/ChannelModel.js"></script>
        <script type="text/javascript" src="/js/models/ConfigurationModel.js"></script>
        <script type="text/javascript" src="/js/models/EventModel.js"></script>
        <script type="text/javascript" src="/js/models/LogoModel.js"></script>
        <script type="text/javascript" src="/js/models/NavigationModel.js"></script>
        <script type="text/javascript" src="/js/models/RawEventModel.js"></script>
        <script type="text/javascript" src="/js/models/RecordingModel.js"></script>
        <script type="text/javascript" src="/js/models/SearchresultModel.js"></script>
        <script type="text/javascript" src="/js/models/SearchtimerModel.js"></script>
        <script type="text/javascript" src="/js/models/TimerModel.js"></script>
        <script type="text/javascript" src="/js/models/TVGuideModel.js"></script>

        <!-- Include collections -->
        <script type="text/javascript" src="/js/collections/ChannelCollection.js"></script>
        <script type="text/javascript" src="/js/collections/EventCollection.js"></script>
        <script type="text/javascript" src="/js/collections/LogoCollection.js"></script>
        <script type="text/javascript" src="/js/collections/NavigationCollection.js"></script>
        <script type="text/javascript" src="/js/collections/RecordingCollection.js"></script>
        <script type="text/javascript" src="/js/collections/SearchresultCollection.js"></script>
        <script type="text/javascript" src="/js/collections/SearchtimerCollection.js"></script>
        <script type="text/javascript" src="/js/collections/TimerCollection.js"></script>
        <script type="text/javascript" src="/js/collections/TVGuideCollection.js"></script>

        <!-- Include jquery plugins -->
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-modal.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-tabs.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-alerts.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-buttons.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-dropdown.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-twipsy.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/bootstrap-popover.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/blinky.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/spin.min.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/jquery.endless-scroll.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/lionbars.min.js"></script>
        <script type="text/javascript" src="/js/jquery-plugins/jquery.fancybox.pack.js"></script>
        
        <!-- Incldue bootstrap and application -->
        <script type="text/javascript" src="/js/Application.js"></script>
        <% } else { %>
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="/js/async.js"></script>
        
        <script type="text/javascript" src="/js/jquery/jquery-1.7.js"></script>
        <script type="text/javascript" src="/js/backbone/underscore.js"></script>
        <script type="text/javascript" src="/js/backbone/backbone.js"></script>
        
        <script type="text/javascript" src="/app.js"></script>
        <% } %>

        <!-- Include templates -->
        <script type="text/template" id="WelcomeTemplate">
            <%- partial('templates/Welcome') %>
        </script>

        <script type="text/template" id="LoginFormTemplate">
            <%- partial('templates/LoginForm') %>
        </script>

        <script type="text/template" id="SearchFormTemplate">
            <%- partial('templates/SearchForm') %>
        </script>

        <script type="text/template" id="ContactTemplate">
            <%- partial('templates/Contact') %>
        </script>

        <script type="text/template" id="EventTemplate">
            <%- partial('templates/Event') %>
        </script>

        <script type="text/template" id="EventTmdbTemplate">
            <%- partial('templates/Event/Tmdb') %>
        </script>

        <script type="text/template" id="TVGuideTemplate">
            <%- partial('templates/TVGuide') %>
        </script>

        <script type="text/template" id="TVGuideEventTemplate">
            <%- partial('templates/TVGuide/Event') %>
        </script>

        <script type="text/template" id="TVGuideChannelTemplate">
            <%- partial('templates/TVGuide/Channel') %>
        </script>

        <script type="text/template" id="TVGuidePaginationTemplate">
            <%- partial('templates/TVGuide/Pagination') %>
        </script>

        <script type="text/template" id="ChannelSelectDialogTemplate">
            <%- partial('templates/Channel/Select/Dialog') %>
        </script>
        
        <script type="text/template" id="SettingsTemplate">
            <%- partial('templates/Settings') %>
        </script>
        
        <script type="text/template" id="SettingsChannelsTemplate">
            <%- partial('templates/Settings/Channels') %>
        </script>
        
        <script type="text/template" id="SettingsGuiaTemplate">
            <%- partial('templates/Settings/Guia') %>
        </script>
        
        <script type="text/template" id="SettingsSocialTemplate">
            <%- partial('templates/Settings/Social') %>
        </script>
        
        <script type="text/template" id="SettingsDatabaseTemplate">
            <%- partial('templates/Settings/Database') %>
        </script>
    </head>

    <body>
        <div class="topbar">
            <div class="fill">
                <div class="container">
                    <a href="#" class="brand">GUIA</a>

                    <ul class="nav" style="display: none;">
                    </ul>

                    <div id="clock" class="nav secondary-nav" style="margin-right: -20px; font-size: 20px; font-weight: 200; line-height: 1; color: white; display: block; padding: 8px 20px 12px; float: right;"></div>
                </div>
            </div>
        </div>

        <div class="container" id="content">
            <div class="content" id="body">

            </div>
            <footer id="footer">
                <p>&copy; <a href="http://githu.com/kersten">Kersten Burkhardt</a> &amp; <a href="http://github.com/volkerrichert">Volker Richert</a> 2011 - <a href="/!/About">About</a></p>
                <div style="float: right; margin-top: -50px;"><div id="flattr"></div></div>
            </footer>
        </div>

        <div class="modal hide fade" id="fetchTmdbInfo">
            <div class="modal-header">
                <a class="close" href="#">×</a>
                <h3><%= __('Posters') %></h3>
            </div>
            <div class="modal-body" style="overflow: auto;">
                <ul class="media-grid">
                </ul>
            </div>
            <div class="modal-footer">
                <a class="btn" id="fetchTmdbInfoClose"><%= __('Close') %></a>
            </div>
        </div>

        <div id="modal"></div>

        <!-- Start application -->
        <script type="text/javascript">
            $(document).ready(function () {
                var app = GUIA;
                app.vdr = {
                    plugins: <%- vdr %>
                };

                app.guia = <%- guia %>;

                app.initialize();
                
                FlattrLoader.render({
                    'uid': 'GOTTMODUS',
                    'url': 'https://github.com/kersten/vdr-guia',
                    'title': 'VDR  GUIA',
                    'description': 'Webinterface for controlling the vdr'
                }, 'flattr', 'replace');
            });
        </script>
    </body>
</html>
